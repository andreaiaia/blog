---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { useTranslations } from '@/i18n/utils';
import CFImage from '@/components/CFImage/CFImage.astro';
import css from '@/styles/About.module.scss';

const t = useTranslations('it');
---

<style>
  @keyframes animateIn {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  [data-animate-on-scroll] {
    opacity: 0;
    transform: translateY(50px);
    will-change: opacity, transform; /* Forza il repaint */
  }

  [data-animate-on-scroll].animate {
    animation: animateIn 1s ease-in-out forwards;
  }
</style>
<script
  src='https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?version=4.8.0&features=IntersectionObserver'
></script>

<BaseLayout
  title={t('site.title')}
  descrition={t('site.description')}
  headerMode='transparent'
  lang='it'
>
  <main>
    <section>
      <section class={css.section}>
        <CFImage
          className={css.photoBackground}
          src='matera/cattedrale-tramonto.jpg'
          alt='Il sole tramonta dietro il campanile della cattedrale di Matera.'
          widths={[480, 800, 1200, 2400]}
          sizes='100vw'
        />
        <div class={`${css.cta} ${css.opaqueBackground}`}>
          <h1 class={css.title} data-animate-on-scroll>Chi sono</h1>
          <p data-animate-on-scroll>Esploro il mondo, uno scatto alla volta</p>
        </div>
      </section>
    </section>

    <section class={css.section}>
      <div class={css.bio}>
        <h2 data-animate-on-scroll>Mi presento</h2>
        <div class={css.text} data-animate-on-scroll>
          <p>
            Mi sono appassionato di fotografia dal 2012, quando ho letto un
            articolo su un blog e ho scoperto che, usando un tempo di
            esposizione lungo, era possibile catturare le scie delle auto in
            movimento.
          </p>
          <p>
            Ho subito preso la macchina fotografica di mio padre, una Nikon D50
            del 2005, sono uscito, ho appoggiato la macchina fotografica su un
            muro, ho capito come impostare il tempo di esposizione a 30 secondi
            e ho scattato la foto che vedete qui sotto.
          </p>
          <p>
            Non è molto, ma l’emozione che ho provato scattando quella foto è la
            stessa emozione che ancora oggi mi accompagna ogni volta che premo
            il pulsante di scatto.
          </p>
        </div>
      </div>
      <div data-animate-on-scroll>
        <CFImage
          className={css.photo}
          src='misc/la-mia-prima-foto.jpg'
          alt='La foto da cui è iniziato tutto, una lunga esposizione di automobili in movimento a Matera'
          s
          Sassi.'
          widths={[480, 800, 1200]}
          sizes='100vw'
        />
      </div>
    </section>
  </main>
  <script>
    const elements = document.querySelectorAll('[data-animate-on-scroll]');
    const observerOptions = {
      threshold: 0.1,
    };

    document.addEventListener('DOMContentLoaded', function () {
      const observer = new IntersectionObserver(function (entries, observer) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);

      elements.forEach(function (element) {
        observer.observe(element);
      });
    });
  </script>
</BaseLayout>
